# CS50 Recipe Diary
#### Video Demo:  <URL: https://www.youtube.com/watch?v=zljBFX0pbrU>
#### Description:
##### **1) Introduction**
  This is a very simple secured personal recipe diary - a web-application created with flask, sqlite3 for the database, and html, css, javascript for the front-end. In order to use the app, you'll first need to create an account with a login username and password (at least 8 characters long, must contain at least one number, one lowercase letter and one uppercase letter), as well as a profile name which will be shown to other users when they search for your recipes or leave you a message. 
  
  At it's core, the app allows users to create recipes and save them onto their accounts, you can of course edit or delete your exisitng recipes. However, the app also comes with other basic functionalities, such as the ability to leave a message to other users, or search for other user's recipes as mentioned already. On the actual recipe page, you have the ability to create a playlist by uploading your own mp3 files or convert youtube videos into mp3 files via URLs, you also have the ability to enable shuffle or move your songs up/down the playlist. On the main page, you can check the current weather by entering the name of the location and its corresponding country abbreviation.
  
  Lastly, the app also comes with a very simple 7-days food planner where you can save text information related to breakfast, lunch, dinner and shopping list onto your account. That's pretty much it.
  
##### **2) Main files**
  - app.py: This is the main file for the app which contains all the python codes that handle all the back-end logics, such as taking in user's inputs by calling html forms via POST or METHOD, and then saving them into a database file called 'food.db' via sqlite3 when needed.
  - config.ini: This stores the API key for the account I created with 'openweathermap', an API that I'm using for extracting weather information of a location, and sending them to the back-end, which then can be used to display weather information for the front-end.
  - food.db: A database file created using sqlite3 which contains 14 tables in total, two for storing user login information, one for storing user's recipe like preferences, one for storing mp3 filenames and its corresponding user id/row id, but I also created a table 'temp' for storing mp3 filenames temporary, because this allows me to keep track of row ids for mp3 filenames, and ensure they're in increment order when doing manipulation to the music table such as moving a particular filename up/down the list. 
    
    Next, we've six tables for storing recipe related information such as recipe name, recipe type, image filename for each recipe and corresponding user id/row id, as well as things like ingredient/equipment/method lists plus nutritions amount. Then, we've two tables for storing users' text messages and their timestamps. The reason why I created two tables, not three or four or more, is because the messaging functionality is a very basic one, it only takse into account of 1 to 1 conversation, so having two tables is sufficient for allowing a user to delete his/her own text message history, without affecting the other user's text message history. Finally, we have a table for storing weather information which are extracted from the 'openweathermap' API, and another table for storing text information for the 7-days food planner.
  - helpers.py: This is a supplement to the main file 'app.py', in order to make my python codes within 'app.py' a little cleaner and less redundant, as it contains a list of useful functions which can be called to 'app.py' when needed.
  
##### **2) Templates files**
  The templates folder contains 9 html files, which are responsible for rendering all pages of the app. They're all very much self explanatory: 'index.html' is responsible for the main/home page which has four main components to it - one for rendering out weather information, one for the food planner, one for seeing your own existing recipes, and lastly, the fourth one is for searching other user's recipes. Next, 'apology.html' is for promptying the user with an error message when the user input something that's been rejected by the app, and 'create.html' is for rendering out the recipe creation page which the user can access by clicking the 'create recipe' button on the top left navigation bar on the main page. Similarly, 'edit.html' is for the recipe editing page which is almost the same to the creation page, you can access it by clicking the left icon below your recipe, next to the delete icon.
  
  Then, we've 'inbox.html' which is for rendering out the user message history page, 'login.html' and 'register.html' are for the login and account creation page respectively, whereas 'player.html' is for rendering out the recipe page which contains an audio component that allows user to create a playlist, you can only access the page after you create a recipe and enter it, or by entering into someone elss' recipes. At last, 'layout.html' contains the basic page template design of the app, in which the main page, creation/edit page, login page, error message page and register page are based on, however, the recipe page aka. 'player.html' uses a complete different page template design.
  
  Please note that a few of these html files do contain small portion of javascript (JS) codes that are responsible for a few of the basic page logics, for example: inside 'index.html' you'll find JS codes that are responsible for rendering out the appropriate page background based on weather condition, on the other hand, 'create.html' and 'edit.html' both contain JS codes that allow user to add/delete an input field. But the majority of the javascript codes are stored within the static folder.
  
##### **2) Static files**
  The static folder contains a host of images and javascript files including a mp3 file and a video file responsible for the app's intro animation and music, as well as a single css file which is responsible for most of the aesthetic elements of the app. There's also a ico file for rendering out the app icon on the browser tab. To clarify, inside the img folder, you'll find all the images that I've used for rendering out some of the page background for the app. Please note that upon login into the main page, the app will automatically create an 'upload_data' folder inside the static folder for the user, the upload_data folder contains two sub folders called image_(user id) and music_(user_id) respectively. Essentially, each user will be given a unique image and music folders based on his/her unique user id, these folders are used for storing each user's uploaded/converted mp3 files and their recipe profile images. 
  
  - index.js: This file handles the majority of the logics for the main page, such as controlling which element should be shown or hided on the page based on the user's action, it also has tons of codes that are responsible for the behaviour of the playlist for the recipe page, and that's pretty much it.
  - ajax.js: This file contains all functions and JS codes that made use of ajax, its main purpose is to create a smoother front-end experience for the user. For example, when user uploads/deletes a song or doing manipulation on the playlist or clicks the like button on the recipe, the standard JS codes handle the front-end effects, while ajax handles the back-end by passing relevant information back to 'app.py' all at the same time, so you can see changes happening in real-time on the screen without reloading the page.
  - search.js: This file handles all the logics related to the search functionality, as well as the interaction for the messaging icons below the recipe on the search section of the app. For example, the app will listen for user's input, if the input matches a particular letter of the name of the recipe, that recipe will show up on the page. There's also a drop down list that you can use to narrow down the type of recipe you want to see.
  - visual.js & chart.js: These two files handle the audio visualisation for the recipe page background and the display of nutrition pie chart respectively. Both files made use of JS's Canvas library, the audio visualisation part was made mostly with the help of online tutorials, I would like to give most of the credit to Franks laboratory (https://www.youtube.com/c/Frankslaboratory/about) - a youtuber that does a lot of demonstrations and tutorial videos for front-end web developtment stuff.
  
#### Known issues or quirks:
  1) Refreshing the recipe page on the browser could lead to songs not able to play upon clicking, go back to the main page and re-enter the recipe page will solve the issue.
  2) After using the drop down list for the search functionality, initially, recipes will fail to display on the page even though matches are found, however, by interacting with the search box - ie. press space/backspace will solve the issue.
  3) Currently, the weather update frequency is once every hour due to the way 'openweathermap' API works. 
  4) The hosted version of the app (URL: http://cmcjas.pythonanywhere.com/) is ran on a free pythonanywhere account which has lower processing priortiy and restriction to certain external sites such as Youtube.com, therefore, you could not use the youtube conversion functionality on this version of the app and it will likely be running rather sluggish due to the reason I've mentioned.
  5) The app has not been written with mobile devices in mind, therefore, some display elements and functionalities may not work properly on a mobile device or devices with small screens. If you want to test out the app, I recommend using a destop or a standard laptop.

    
